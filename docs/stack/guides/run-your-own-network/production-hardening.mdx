---
title: 4. Production hardening
description: >-
  Security, monitoring, and operational best practices for production
  deployments
sidebar_position: 4
mainSource:
  url: 'https://github.com/Consensys/linea-monorepo'
image: /img/socialCards/4-production-hardening.jpg
---

import DocCardList from '@theme/DocCardList';

export const relatedDocs = [
  {type: 'link', href: '/stack/how-it-works/boundaries-responsibilities', label: 'Boundaries & Responsibilities'},
];

Production hardening applies security, monitoring, and operational best practices before handling
production workloads. Do not skip these steps.

## Security hardening

### Access controls

- RBAC: Configure role-based access control on RPC endpoints and APIs (Private Validium)
- API portal: Set up controlled access to network functionality (Private Validium)
- Network isolation: Deploy internal services ([sequencer](../../../protocol/architecture/sequencer/index.mdx), [coordinator](../../../protocol/architecture/coordinator.mdx), [prover](../../../protocol/architecture/prover/index.mdx)) on private networks
- Firewall rules: Restrict access to required ports only

### Key management

- Remote signing: Use hardware security modules or cloud key management service key management service (KMS) for signing operations
- Key rotation: Establish key rotation procedures
- Backup: Secure backup of keys and configuration

### Network security

- TLS: Use TLS for all external communications
- VPN: Use VPN for administrative access
- DDoS protection: Protect RPC endpoints from DDoS attacks

## Monitoring and alerting

### Required monitoring

- Component health: Monitor all components for availability and errors
- Block production: Monitor block production rate and consensus health
- Proof generation: Monitor proof generation latency and success rate
- Finalization: Monitor finalization submission success and timing
- Network connectivity: Monitor P2P connectivity between nodes
- Resource usage: Monitor CPU, memory, and storage usage

### Alerting

Set up alerts for:

- Component failures
- Block production delays
- Proof generation failures
- Finalization delays
- Resource exhaustion
- Network connectivity issues

### Dashboards

Create dashboards for:

- Network health overview
- Component status
- Transaction throughput
- Finalization metrics
- Resource utilization

## Redundancy and high availability

### Component redundancy

- Consensus layer: Multiple Maru instances (minimum 4 for QBFT)
- Execution layer: Multiple execution client instances behind load balancer
- [Prover](../../../protocol/architecture/prover/index.mdx): Multiple prover instances for redundancy
- RPC nodes: Multiple RPC nodes behind load balancer

### High availability

- Active-passive: Consider active-passive setup for [sequencer](../../../protocol/architecture/sequencer/index.mdx) and [coordinator](../../../protocol/architecture/coordinator.mdx)
- Archive nodes: Deploy archive nodes for historical data access and recovery
- Disaster recovery: Test backup and recovery procedures

## Backup and disaster recovery

### Backup requirements

- State snapshots: Regular backups of state manager state
- Configuration: Version-controlled configuration files
- Keys: Secure backup of keys (separate from operational keys)
- Chain data: Consider archive node for complete historical data

### Disaster recovery

- Recovery procedures: Documented and tested recovery procedures
- RTO/RPO: Define recovery time objectives and recovery point objectives
- Testing: Regular testing of disaster recovery procedures

## Operational procedures

### Change management

- Version updates: Tested procedures for component version updates
- Configuration changes: Change control process for configuration updates
- Rollback procedures: Documented rollback procedures

### Maintenance windows

- Planned maintenance: Schedule and communicate maintenance windows
- Zero-downtime updates: Plan for zero-downtime updates where possible

### Documentation

- Runbooks: Documented runbooks for common operational tasks
- Troubleshooting: Documented troubleshooting procedures
- Escalation: Defined escalation procedures

## Compliance and audit

### Audit trails

- Logging: Comprehensive logging of all operations
- Access logs: Log all access to RPC endpoints and APIs
- Transaction logs: Maintain transaction logs for audit purposes

### Compliance

- KYC/KYT: Implement KYC/KYT controls (Private Validium)
- Data retention: Define data retention policies
- Selective disclosure: Support selective data disclosure to auditors and regulators (Private Validium)

## Performance optimization

### Resource allocation

- CPU: Allocate sufficient CPU for proof generation ([prover](../../../protocol/architecture/prover/index.mdx))
- Memory: Allocate sufficient memory for state management
- Storage: Plan for storage growth based on network activity

### Scaling

- Horizontal scaling: Plan for horizontal scaling of RPC nodes and prover instances
- Vertical scaling: Plan for vertical scaling of resource-intensive components

## Pre-production checklist

Before going to production, verify:

- [ ] All security hardening applied
- [ ] Monitoring and alerting configured
- [ ] Redundancy and high availability implemented
- [ ] Backup and disaster recovery procedures tested
- [ ] Operational procedures documented
- [ ] Compliance requirements met (if applicable)
- [ ] Performance testing completed
- [ ] Failure scenarios tested

## Next steps

After production hardening, proceed to [Operations guides](../operations-guides/index.mdx) for
ongoing operations, scaling, and maintenance procedures.

## Related documentation

<DocCardList items={relatedDocs} />
